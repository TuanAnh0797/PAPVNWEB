<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biểu đồ OEE Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

            .header h1 {
                color: #2c3e50;
                font-size: 2.5em;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            .header p {
                color: #7f8c8d;
                font-size: 1.1em;
            }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

            .control-group label {
                margin-bottom: 5px;
                font-weight: bold;
                color: #34495e;
            }

            .control-group input, .control-group select {
                padding: 10px;
                border: 2px solid #bdc3c7;
                border-radius: 8px;
                font-size: 14px;
                transition: border-color 0.3s ease;
            }

                .control-group input:focus, .control-group select:focus {
                    outline: none;
                    border-color: #3498db;
                }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            }

        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-wrapper {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

            .chart-wrapper:hover {
                transform: translateY(-5px);
            }

        .chart-title {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.3em;
            font-weight: bold;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .oee-summary {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .oee-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .oee-card {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

            .oee-card:hover {
                transform: scale(1.05);
            }

            .oee-card h3 {
                font-size: 1rem;
                margin-bottom: 10px;
                opacity: 0.9;
            }

            .oee-card .value {
                font-size: 2.5rem;
                font-weight: bold;
            }

        .control-group small {
            font-size: 11px;
            color: #7f8c8d;
            margin-top: 2px;
        }

        .oee-card small {
            font-size: 12px;
            opacity: 0.8;
            display: block;
            margin-top: 5px;
        }

        .availability {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }

        .performance {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }

        .quality {
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
        }

        .oee-total {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 OEE Dashboard - Sản Xuất</h1>
            <p>Overall Equipment Effectiveness Monitoring</p>
            <div style="margin-top: 15px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 8px; font-size: 14px; color: #2c3e50;">
                <strong>OEE = Availability × Performance × Quality</strong><br>
                <small>
                    • Availability: Thời gian vận hành / Thời gian kế hoạch<br>
                    • Performance: Tốc độ thực tế / Tốc độ thiết kế<br>
                    • Quality: Sản phẩm đạt / Tổng sản phẩm
                </small>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label>🏭 Availability (%)</label>
                <input type="number" id="availability" min="0" max="100" value="85">
                <small>Thời gian hoạt động thực tế</small>
            </div>
            <div class="control-group">
                <label>⚡ Performance (%)</label>
                <input type="number" id="performance" min="0" max="100" value="78">
                <small>Tốc độ sản xuất</small>
            </div>
            <div class="control-group">
                <label>✅ Quality (%)</label>
                <input type="number" id="quality" min="0" max="100" value="92">
                <small>Tỷ lệ sản phẩm đạt</small>
            </div>
            <div class="control-group">
                <label>📅 Ca sản xuất</label>
                <select id="timeRange">
                    <option value="shift">Ca làm việc</option>
                    <option value="day">Hàng ngày</option>
                    <option value="week">Hàng tuần</option>
                    <option value="month">Hàng tháng</option>
                </select>
            </div>
            <button class="btn" onclick="updateCharts()">🔄 Cập nhật OEE</button>
        </div>

        <div class="oee-summary">
            <div class="oee-cards">
                <div class="oee-card availability">
                    <h3>🏭 Availability</h3>
                    <div class="value" id="availabilityValue">85%</div>
                    <small>Thời gian hoạt động</small>
                </div>
                <div class="oee-card performance">
                    <h3>⚡ Performance</h3>
                    <div class="value" id="performanceValue">78%</div>
                    <small>Hiệu suất sản xuất</small>
                </div>
                <div class="oee-card quality">
                    <h3>✅ Quality</h3>
                    <div class="value" id="qualityValue">92%</div>
                    <small>Chất lượng sản phẩm</small>
                </div>
                <div class="oee-card oee-total">
                    <h3>🎯 OEE Total</h3>
                    <div class="value" id="oeeValue">61%</div>
                    <small>Hiệu quả tổng thể</small>
                </div>
            </div>
        </div>

        <div class="charts-container">
            <div class="chart-wrapper">
                <div class="chart-title">📈 OEE Trend theo ca sản xuất</div>
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>

            <div class="chart-wrapper">
                <div class="chart-title">🥧 Phân tích thành phần OEE</div>
                <div class="chart-container">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-wrapper">
            <div class="chart-title">📊 So sánh OEE các dây chuyền sản xuất</div>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        let trendChart, pieChart, barChart;

        $(document).ready(function () {
            initCharts();

            // Auto update mỗi 5 giây
            setInterval(function () {
                generateRandomData();
                updateCharts();
            }, 5000);
        });

        function initCharts() {
            // Biểu đồ xu hướng
            const trendCtx = $('#trendChart')[0].getContext('2d');
            trendChart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['Ca 1', 'Ca 2', 'Ca 3', 'Ca 4', 'Ca 5', 'Ca 6', 'Ca 7', 'Ca 8'],
                    datasets: [{
                        label: 'OEE (%)',
                        data: [65, 72, 68, 75, 61, 58, 64, 69],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Availability (%)',
                        data: [85, 88, 82, 90, 78, 75, 83, 87],
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 2,
                        tension: 0.4
                    }, {
                        label: 'Performance (%)',
                        data: [78, 82, 85, 84, 80, 78, 77, 82],
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 2,
                        tension: 0.4
                    }, {
                        label: 'Quality (%)',
                        data: [92, 95, 93, 98, 96, 94, 97, 94],
                        borderColor: '#8e44ad',
                        backgroundColor: 'rgba(142, 68, 173, 0.1)',
                        borderWidth: 2,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    }
                }
            });

            // Biểu đồ tròn
            const pieCtx = $('#pieChart')[0].getContext('2d');
            pieChart = new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Availability', 'Performance', 'Quality'],
                    datasets: [{
                        data: [85, 78, 92],
                        backgroundColor: [
                            '#27ae60',
                            '#f39c12',
                            '#8e44ad'
                        ],
                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    animation: {
                        animateRotate: true,
                        duration: 1500
                    }
                }
            });

            // Biểu đồ cột so sánh thiết bị
            const barCtx = $('#barChart')[0].getContext('2d');
            barChart = new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: ['Dây chuyền A', 'Dây chuyền B', 'Dây chuyền C', 'Dây chuyền D', 'Dây chuyền E'],
                    datasets: [{
                        label: 'Availability',
                        data: [85, 78, 92, 88, 75],
                        backgroundColor: '#27ae60',
                        borderRadius: 5
                    }, {
                        label: 'Performance',
                        data: [78, 85, 79, 82, 88],
                        backgroundColor: '#f39c12',
                        borderRadius: 5
                    }, {
                        label: 'Quality',
                        data: [92, 89, 95, 91, 86],
                        backgroundColor: '#8e44ad',
                        borderRadius: 5
                    }, {
                        label: 'OEE',
                        data: [61, 58, 69, 66, 57],
                        backgroundColor: '#e74c3c',
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    animation: {
                        duration: 1200,
                        easing: 'easeOutBounce'
                    }
                }
            });
        }

        function updateCharts() {
            const availability = parseInt($('#availability').val());
            const performance = parseInt($('#performance').val());
            const quality = parseInt($('#quality').val());
            const oee = Math.round((availability * performance * quality) / 10000);

            // Cập nhật giá trị hiển thị
            $('#availabilityValue').text(availability + '%');
            $('#performanceValue').text(performance + '%');
            $('#qualityValue').text(quality + '%');
            $('#oeeValue').text(oee + '%');

            // Cập nhật biểu đồ tròn
            pieChart.data.datasets[0].data = [availability, performance, quality];
            pieChart.update('active');

            // Hiệu ứng màu cho OEE card
            const oeeCard = $('.oee-total');
            if (oee >= 85) {
                oeeCard.css('background', 'linear-gradient(45deg, #27ae60, #2ecc71)');
            } else if (oee >= 70) {
                oeeCard.css('background', 'linear-gradient(45deg, #f39c12, #e67e22)');
            } else {
                oeeCard.css('background', 'linear-gradient(45deg, #e74c3c, #c0392b)');
            }

            // Animation cho cards
            $('.oee-card').addClass('animate');
            setTimeout(() => $('.oee-card').removeClass('animate'), 300);
        }

        function generateRandomData() {
            // Tạo dữ liệu ngẫu nhiên trong khoảng hợp lý
            const newAvailability = Math.floor(Math.random() * 20) + 75; // 75-95
            const newPerformance = Math.floor(Math.random() * 25) + 70;  // 70-95
            const newQuality = Math.floor(Math.random() * 15) + 85;      // 85-100

            $('#availability').val(newAvailability);
            $('#performance').val(newPerformance);
            $('#quality').val(newQuality);
        }

        // Thêm hiệu ứng CSS cho animation
        $('<style>').text(`
                        .animate {
                            animation: pulse 0.3s ease-in-out;
                        }

                        @keyframes pulse {
                            0% { transform: scale(1); }
                            50% { transform: scale(1.05); }
                            100% { transform: scale(1); }
                        }
                    `).appendTo('head');
    </script>
</body>
</html>



<!--1. Availability (Tính khả dụng)

Công thức: (Thời gian vận hành thực tế / Thời gian lên kế hoạch) × 100%
Ý nghĩa: Tỷ lệ thời gian máy móc thực sự hoạt động so với thời gian dự kiến
Mất mát: Downtime, breakdown, setup time, changeover

2. Performance (Hiệu suất)

Công thức: (Tốc độ sản xuất thực tế / Tốc độ sản xuất lý tưởng) × 100%
Ý nghĩa: Tốc độ sản xuất thực tế so với tốc độ thiết kế tối đa
Mất mát: Chạy chậm, micro-stops, reduced speed

3. Quality (Chất lượng)

Công thức: (Sản phẩm đạt chất lượng / Tổng sản phẩm sản xuất) × 100%
Ý nghĩa: Tỷ lệ sản phẩm đạt tiêu chuẩn chất lượng
Mất mát: Defects, rework, scrap


🎯 Cập nhật hoàn tất!
Bây giờ dashboard OEE đã phản ánh đúng ý nghĩa trong sản xuất:
📋 Các chỉ số OEE đã được giải thích rõ:

🏭 Availability (Tính khả dụng):

Tỷ lệ thời gian máy thực sự hoạt động
Ví dụ: Máy dự kiến chạy 8h, thực tế chạy 6.8h → 85%


⚡ Performance (Hiệu suất):

Tốc độ sản xuất thực tế vs thiết kế
Ví dụ: Thiết kế 100 sản phẩm/h, thực tế 78 sản phẩm/h → 78%


✅ Quality (Chất lượng):

Tỷ lệ sản phẩm đạt tiêu chuẩn
Ví dụ: Sản xuất 100 sản phẩm, 92 sản phẩm đạt → 92%



🧮 Công thức tính OEE:
OEE = 85% × 78% × 92% = 61%
📊 Mức độ đánh giá OEE:

≥ 85%: Xuất sắc (World Class)
70-84%: Tốt
60-69%: Khá
< 60%: Cần cải thiện

Dashboard này giúp bạn theo dõi hiệu quả sản xuất một cách trực quan và toàn diện!-->